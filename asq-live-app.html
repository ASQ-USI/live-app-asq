<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../asq-base/asq-base.html">
<link rel="import" href="./src/elements/asq-toolbar/asq-toolbar.html">
<link rel="import" href="./src/elements/asq-live-app-presenter/asq-live-app-presenter.html">
<link rel="import" href="./src/elements/asq-live-app-viewer/asq-live-app-viewer.html">
<dom-module id="asq-live-app">

  <template>
    <template is="dom-if" if="{{hasRole(role, roles.PRESENTER)}}">
      <asq-live-app-presenter event-bus="[[eventBus]]"></asq-live-app-presenter>
    </template>
    <template is="dom-if" if="{{hasRole(role, roles.VIEWER)}}">
      <asq-live-app-viewer 
        event-bus="[[eventBus]]">
      </asq-live-app-viewer> 
    </template>
  </template>
  
  <script>
Polymer({
  is: 'asq-live-app',
  behaviors: [
    ASQ.asqElementBehavior,
  ],
  properties: {
    /**
     * Event bus to communicate with ASQ
     */
    eventBus: {
      type: Object,
      notify: true,
    },
  },

  created: function () {
    document.addEventListener('asq-ready', function (evt) {
      this.eventBus = evt.detail.asqEventBus;
    }.bind(this));
  },
});
  </script>
</dom-module>